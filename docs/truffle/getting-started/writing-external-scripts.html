<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Favicon -->
    <link rel="icon" href="/img/favicons/favicon.ico">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Truffle Suite">
    <link rel="icon" sizes="192x192" href="/img/favicons/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Truffle Suite">
    <link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png">

    <!-- Tile icon for Win8/10 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="img/favicons/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <!-- Facebook OpenGraph -->
    <meta property="og:site_name" content="Truffle Suite" />
    <meta property="og:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
    <meta property="og:title" content="Truffle Suite | Documentation | Truffle | Writing External Scripts / Command Plugins" />
    <meta property="og:url" content="https://trufflesuite.com/docs/truffle/getting-started/writing-external-scrip" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://truffleframework.com/img/favicons/truffle-share.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="Truffle Suite" />
    <meta name="twitter:title" content="Truffle Suite | Documentation | Truffle | Writing External Scripts / Command Plugins" />
    <meta name="twitter:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
    <meta name="twitter:creator" content="Truffle Suite" />
    <meta name="twitter:domain" content="trufflesuite.com" />
    <meta name="twitter:image:src" content="https://truffleframework.com/img/favicons/truffle-share.png" />
    
    <meta name="google-site-verification" content="BSgPkMHzw7IxJTpEElNfD8ZZYPzXgOQiTVPzAxAG8-o" />

      <title>Truffle Suite | Documentation | Truffle | Writing External Scripts / Command Plugins</title>

    <link href="https://fonts.googleapis.com/css?family=Grand+Hotel|Open+Sans|Oswald|Varela+Round|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/index.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top" id="primaryNav">
      <a class="navbar-brand current" href="/">
        <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" />TRUFFLE SUITE
      </a>
    
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    
      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="suiteDropdown" href="#" data-toggle="dropdown">SUITE</a>
    
            <div class="dropdown-menu">
              <a class="text-truffle" href="/truffle">
                <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span class="narrow">T</span>RUFFLE
              </a>
              <a class="text-ganache" href="/ganache">
                <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" />Ganache
              </a>
              <a class="text-drizzle" href="/drizzle">
                <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" />dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le
              </a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/docs">DOCS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/tutorials">TUTORIALS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/boxes">BOXES</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/blog">BLOG</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/events">EVENTS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/community">COMMUNITY</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/university">UNIVERSITY</a>
          </li>
        </ul>
      </div>
    </nav>    
    <main role="main" class="container-fluid">
      <!--<div class="row pt-4 pb-4">
        <div class="col">
          <form>
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="🔍 Search">
              </div>
              <div class="col">
                <select id="inputState" class="form-control">
                  <option selected>4.1</option>
                  <option>4.0.6</option>
                  <option>4.0.5</option>
                </select>
              </div>
              <div class="col">
                <button type="submit" class="btn btn-truffle">SEARCH</button>
              </div>
            </div>
          </form>
        </div>
      </div>-->

      <div class="row row-docs-main">
        <aside class="col-lg-3 docs-sidebar" id="docsSidebar">
          <h2 class="space-icon d-lg-none text-center" id="docsSidebarToggle"><i class="fas fa-book"></i> SEARCH &amp; CONTENTS</h2>
        
          <form class="mb-4" id="searchForm">
            <div class="input-group">
              <input type="text" class="form-control" id="searchInput" placeholder="Search">
              <div class="input-group-append">
                <button type="submit" class="btn btn-truffle">SEARCH</button>
              </div>
            </div>
          </form>
        
          <a class="toggle-truffle" href="#truffleDocs" data-toggle="collapse">
            <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><h2 class="text-truffle"><span class="narrow">T</span>RUFFLE</h2>
          </a>
        
          <div class="collapse truffle" id="truffleDocs" data-parent="#docsSidebar">
            <ul>
              <a href="/docs/truffle/overview"><li>Overview</li></a>
              <a href="/docs/truffle/quickstart"><li>Quickstart</li></a>
            </ul>
              <h3>Getting Started</h3>
              <ul>
                  <a href="/docs/truffle/getting-started/installation"><li>Installation</li></a>
                  <a href="/docs/truffle/getting-started/creating-a-project"><li>Creating a Project</li></a>
                  <a href="/docs/truffle/getting-started/compiling-contracts"><li>Compiling Contracts</li></a>
                  <a href="/docs/truffle/getting-started/running-migrations"><li>Running Migrations</li></a>
                  <a href="/docs/truffle/getting-started/interacting-with-your-contracts"><li>Interacting with Your Contracts</li></a>
                  <a href="/docs/truffle/getting-started/truffle-with-metamask"><li>Truffle with MetaMask</li></a>
                  <a href="/docs/truffle/getting-started/package-management-via-ethpm"><li>Package Management via EthPM</li></a>
                  <a href="/docs/truffle/getting-started/package-management-via-npm"><li>Package Management via NPM</li></a>
                  <a href="/docs/truffle/getting-started/debugging-your-contracts"><li>Debugging Your Contracts</li></a>
                  <a href="/docs/truffle/getting-started/using-truffle-develop-and-the-console"><li>Using Truffle Develop and The Console</li></a>
                  <a href="/docs/truffle/getting-started/writing-external-scripts"><li>Writing External Scripts</li></a>
              </ul>
              <h3>Testing</h3>
              <ul>
                  <a href="/docs/truffle/testing/testing-your-contracts"><li>Testing Your Contracts</li></a>
                  <a href="/docs/truffle/testing/writing-tests-in-javascript"><li>Writing Tests in JavaScript</li></a>
                  <a href="/docs/truffle/testing/writing-tests-in-solidity"><li>Writing Tests in Solidity</li></a>
              </ul>
              <h3>Advanced</h3>
              <ul>
                  <a href="/docs/truffle/advanced/networks-and-app-deployment"><li>Networks and App Deployment</li></a>
                  <a href="/docs/truffle/advanced/build-processes"><li>Build Processes</li></a>
                  <a href="/docs/truffle/advanced/creating-a-truffle-box"><li>Creating a Truffle Box</li></a>
              </ul>
              <h3>Reference</h3>
              <ul>
                  <a href="/docs/truffle/reference/choosing-an-ethereum-client"><li>Choosing an Ethereum Client</li></a>
                  <a href="/docs/truffle/reference/configuration"><li>Configuration</li></a>
                  <a href="/docs/truffle/reference/contract-abstractions"><li>Contract Abstractions</li></a>
                  <a href="/docs/truffle/reference/truffle-commands"><li>Truffle Commands</li></a>
                  <a href="/docs/truffle/reference/contact-the-developers"><li>Contact The Developers</li></a>
              </ul>
          </div>
        
          <a class="toggle-ganache" href="#ganacheDocs" data-toggle="collapse">
            <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" /><h2 class="text-ganache">Ganache</h2>
          </a>
          
          <div class="collapse ganache" id="ganacheDocs" data-parent="#docsSidebar">
            <ul>
              <a href="/docs/ganache/overview"><li>Overview</li></a>
              <a href="/docs/ganache/quickstart"><li>Quickstart</li></a>
            </ul>
          </div>
        
          <a class="toggle-drizzle" href="#drizzleDocs" data-toggle="collapse">
            <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" /><h2 class="text-drizzle">dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le</h2>
          </a>
          
          <div class="collapse drizzle" id="drizzleDocs" data-parent="#docsSidebar">
            <ul>
              <a href="/docs/drizzle/overview"><li>Overview</li></a>
              <a href="/docs/drizzle/quickstart"><li>Quickstart</li></a>
            </ul>
              <h3>Getting Started</h3>
              <ul>
                  <a href="/docs/drizzle/getting-started/using-an-existing-redux-store"><li>Using an Existing Redux Store</li></a>
                  <a href="/docs/drizzle/getting-started/contract-interaction"><li>Contract Interaction</li></a>
              </ul>
              <h3>React</h3>
              <ul>
                  <a href="/docs/drizzle/react/react-integration"><li>React Integration</li></a>
                  <a href="/docs/drizzle/react/react-components"><li>React Components</li></a>
              </ul>
              <h3>Reference</h3>
              <ul>
                  <a href="/docs/drizzle/reference/drizzle-options"><li>Drizzle Options</li></a>
                  <a href="/docs/drizzle/reference/drizzle-state"><li>Drizzle State</li></a>
                  <a href="/docs/drizzle/reference/how-data-stays-fresh"><li>How Data Stays Fresh</li></a>
              </ul>
          </div>
        </aside>
        <div class="col-lg-9 bd-light-cream docs-content">
          
    <h1 class="link-markdown">
      <a href="#writing-external-scripts" name="writing-external-scripts"><i class="fas fa-link"></i></a>
      Writing External Scripts
    </h1>
  <p>Often you may want to run external scripts that interact with your contracts. Truffle provides an easy way to do this, bootstrapping your contracts based on your desired network and connecting to your Ethereum client automatically per your <a href="/docs/advanced/configuration">project configuration</a>.</p>

    <h2 class="link-markdown">
      <a href="#command" name="command"><i class="fas fa-link"></i></a>
      Command
    </h2>
  <p>To run an external script, perform the following:</p>
<pre><code>$ truffle exec &lt;path/to/file.js&gt;
</code></pre>
    <h2 class="link-markdown">
      <a href="#file-structure" name="file-structure"><i class="fas fa-link"></i></a>
      File structure
    </h2>
  <p>In order for external scripts to be run correctly, Truffle expects them to export a function that takes a single parameter as a callback:</p>
<pre><code class="lang-javascript">module.exports = function(callback) {
  // perform actions
}
</code></pre>
<p>You can do anything you&#39;d like within this script, so long as the callback is called when the script finishes. The callback accepts an error as its first and only parameter. If an error is provided, execution will halt and the process will return a non-zero exit code.</p>

    <h1 class="link-markdown">
      <a href="#third-party-plugin-commands" name="third-party-plugin-commands"><i class="fas fa-link"></i></a>
      Third-party plugin commands
    </h1>
  <p class="alert alert-warning">
<strong>Note</strong>: This feature is new and still in a barebones state. Please let us
know how we can improve it!
</p>


    <h2 class="link-markdown">
      <a href="#plugin-installation-usage" name="plugin-installation-usage"><i class="fas fa-link"></i></a>
      Plugin installation / usage
    </h2>
  <ol>
<li><p>Install the plugin from NPM.</p>
<pre><code>npm install --save-dev truffle-plugin-hello
</code></pre></li>
<li><p>Add a <code>plugins</code> section to your Truffle config.</p>
<pre><code class="lang-javascript">module.exports = {
  /* ... rest of truffle-config */

  plugins: [
    &quot;truffle-plugin-hello&quot;
  ]
}
</code></pre>
</li>
<li><p>Run the command</p>
<pre><code>$ truffle run hello
Hello, World!
</code></pre></li>
</ol>

    <h2 class="link-markdown">
      <a href="#creating-a-custom-command-plugin" name="creating-a-custom-command-plugin"><i class="fas fa-link"></i></a>
      Creating a custom command plugin
    </h2>
  <ol>
<li><p>Implement the command as a Node module with a function as its default export.</p>
<p>Example: <code>hello.js</code></p>
<pre><code class="lang-javascript">/**
 * Outputs `Hello, World!` when running `truffle run hello`,
 * or `Hello, ${name}` when running `truffle run hello [name]`
 * @param {Config} config - A truffle-config object.
 * Has attributes like `truffle_directory`, `working_directory`, etc.
 */
 module.exports = async (config) =&gt; {
  // config._ has the command arguments.
  // config_[0] is the command name, e.g. &quot;hello&quot; here.
  // config_[1] starts remaining parameters.
  if (config.help) {
 console.log(`Usage: truffle run hello [name]`);
     done(null, [], []);    
 return;
  }

  let name = config._.length &gt; 1 ? config._[1] : &#39;World!&#39;;
  console.log(`Hello, ${name}`);
}
</code></pre>
</li>
<li><p>Define a <code>truffle-plugin.json</code> file to specify the command.
Example: <code>truffle-plugin.json</code></p>
<pre><code class="lang-json">{
  &quot;commands&quot;: {
&quot;hello&quot;: &quot;hello.js&quot;
  }
}
</code></pre>
</li>
<li><p>Publish to NPM</p>
<pre><code>npm publish
</code></pre></li>
</ol>


          <div class="contribute-link">
            See a way to make this page better? <a href="https://github.com/trufflesuite/trufflesuite.com/edit/master/src/docs/truffle/getting-started">Edit here &raquo;</a>
          </div>        </div>
      </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="/js/vendor/jquery-3.2.1.slim.min.js"><\/script>')</script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/vendor/prism.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="/js/docs.js"></script>
    <script src="https://unpkg.com/lunr/lunr.js"></script>
    <script src="/js/docs-search.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-83874933-3', 'auto');
      ga('send', 'pageview');
    </script>  </body>
</html>